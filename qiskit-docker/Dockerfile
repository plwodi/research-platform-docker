#start from the latest base-docker release
FROM plwodi/base-docker:version1.0

#install base Qiskit components
RUN pip3 install qiskit
RUN pip3 install pyscf

#install JupyterLabs
RUN pip install -Iv jupyterlab==3.0.10

#create directory to map local hard drive
WORKDIR /computer

#clone any relevant Github repositories
RUN git clone https://github.com/Qiskit/qiskit-tutorials.git /computer/qiskit

#welcome messages and instructions for the user
RUN echo "echo -e \"\nðŸ”† Welcome to the qiskit container\"\n" >>~/.bashrc
RUN echo "echo -e \"\nðŸš€ This is a suggested minimum set of components needed to get started with quantum computing\n\n \"" >>~/.bashrc
RUN echo "echo -e \"\nThe following components have been installed in this container:\"\n" >>~/.bashrc
RUN echo "echo -e \"\qiskit, pyscf, jupyterlab\"\n" >>~/.bashrc
RUN echo "echo -e \"\n\nStarting Jupyter Lab...\"\n" >>~/.bashrc
RUN echo "jupyter lab --allow-root --no-browser --ip=0.0.0.0  &>/dev/null &" >>~/.bashrc
RUN echo "sleep 2" >>~/.bashrc
RUN echo "echo -e \"\nðŸ“º You can open Jupyter Lab using the next URL:\n\"" >>~/.bashrc
RUN echo "jupyter server list | egrep -o 'http://[^ ]+'" >>~/.bashrc
RUN echo "echo -e \"\n\nIf the URL did not appear please run \'jupyter server list\' to get the URL.\"" >>~/.bashrc
RUN echo "echo -e \"\n\n\"" >>~/.bashrc